<%-include("partials/header.ejs") %>
<div class="container">
<div class="row g-5">
    <div class="col-md-8">
      <h3 class="pb-4 mb-4 fst-italic border-bottom">
        <b>JH's Blog</b>
      </h3>

      
      <% if (locals.posts.length > 0) { %>
        <% for (let i = posts.length - 1 ; i >= 0 ; i--) { %>
        <article class="blog-post">
          <h2 class="display-5 link-body-emphasis mb-1"> <a href="/view/<%= posts[i].id %>"> <%= posts[i].title %> </a></h2>
          <p class="blog-post-meta"><%= posts[i].date %> by @<%= posts[i].user %></a></p>
          <p><%= posts[i].content%></p>
        </article>
        <% } } else {%>
          <article class="blog-post">
          <p>There's nothing here for now.</p>
        </article>
          <% } %>

    </div>

    <div class="col-md-4">
      <div class="position-sticky" style="top: 2rem;">
        <div class="p-4 mb-3 bg-body-tertiary rounded">
          <h4 class="fst-italic">About</h4>
          <p class="mb-0">This is a Blog web application using Node.js, Express.js, and EJS made by Yu-Hsuan Hsieh. The application will allow users to create and view blog posts. Posts will not persist between sessions as no database will be used in this version of the application. Styling will be an important aspect of this project to ensure a good user experience.</p>
        </div>

        <div>
          <h4 class="fst-italic">Recent posts</h4>
          <ul class="list-unstyled">
              <% if (locals.posts) { %>
                <% for (let i = posts.length - 1 ; i >= 0 ; i--) { %>
                <li>
                    <div class="col-lg-8">
                      <h6 class="mb-0"><a href="/view/<%= posts[i].id %>"><%= posts[i].title %></a></h6>
                      <small class="text-body-secondary"><%= posts[i].date %> by @<%= posts[i].user %></small>
                    </div>
                  </a>
                </li>
                <% } }%>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Step 3 Add Footer -->
<%-include("partials/footer.ejs") %>